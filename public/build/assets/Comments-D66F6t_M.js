import{b as s,j as t,B as f,a as u,a4 as h,G as l}from"./app-DqrfRhpM.js";import{R as j}from"./RichTextEditor-C-7j69Qc.js";import{u as b}from"./useTasksStore-sUhWzd7G.js";import{c as T,a as C}from"./datetime-DPmTjIyX.js";import{T as g}from"./Title-THazo1f7.js";import{T as r}from"./Text-CYeE7gwI.js";import{F as _}from"./Flex-BMSF1Mch.js";import{C as v}from"./Center-DGTxU_Us.js";import{S}from"./Stack-CB2HZo4s.js";import{A as w}from"./Avatar-8ZiBPAlR.js";import{T as y}from"./Tooltip-CZKDsjfN.js";import"./use-computed-color-scheme-CHy8HJhK.js";import"./use-disclosure-haR9m_kv.js";import"./use-resolved-styles-api-C6QyS_sL.js";import"./Popover-CrJS6_Dl.js";import"./DirectionProvider-Cj8DwV0F.js";import"./use-floating-auto-update-BRfn-mwN.js";import"./use-uncontrolled-9qUADOgH.js";import"./TextInput-M8gLVz6c.js";import"./InputBase-BmxmUY5v.js";import"./Input-W4_Gi7np.js";import"./create-optional-context-BmY0azF0.js";import"./ColorSwatch-D4spkHOs.js";import"./SimpleGrid-DhnZkqQA.js";import"./get-sorted-breakpoints-CNZc6oJ9.js";import"./get-base-value-JqT_q0U7.js";import"./ColorPicker-2tkdpT5R.js";import"./clamp-DTmYCdls.js";import"./ActionIcon-DGaUhv5Z.js";import"./index-CMBmH9qu.js";import"./reorder-CdfroKv2.js";import"./_baseClone-Dm2q0I1Z.js";import"./get-style-object-DUJZA7T_.js";const R="_comment_1a1ld_1",z={comment:R};function nt({task:i}){const{comments:m,fetchComments:c,saveComment:d}=b(),[a,p]=s.useState(!0),[o,x]=s.useState(""),n=s.useRef(null);return s.useEffect(()=>{c(i,()=>p(!1))},[]),t.jsxs(f,{mb:"xl",children:[t.jsxs(g,{order:3,mt:"xl",children:["Discussion",!a&&t.jsxs(r,{c:"dimmed",fw:500,display:"inline-block",ml:5,children:["(",m.length,")"]})]}),t.jsx(j,{ref:n,mt:"md",placeholder:"Write a comment",height:100,content:o,onChange:e=>x(e)}),t.jsx(_,{justify:"flex-end",children:t.jsx(u,{variant:"filled",mt:"md",disabled:o.length<=7,onClick:()=>d(i,o,()=>n.current.setContent("")),children:"Add comment"})}),a?t.jsx(v,{mih:100,children:t.jsx(h,{color:"blue"})}):t.jsx(S,{gap:30,mt:"md",children:m.map(e=>t.jsxs("div",{children:[t.jsxs(l,{justify:"space-between",children:[t.jsxs(l,{children:[t.jsx(w,{src:e.user.avatar,radius:"xl",color:"blue"}),t.jsxs("div",{children:[t.jsx(r,{size:"sm",c:"blue",fw:500,children:e.user.name}),t.jsx(r,{size:"xs",c:"dimmed",children:e.user.job_title})]})]}),t.jsx(y,{label:T(e.created_at),openDelay:250,withArrow:!0,children:t.jsx(r,{size:"xs",c:"dimmed",children:C(e.created_at)})})]}),t.jsx(r,{pl:54,pt:6,size:"sm",className:z.comment,dangerouslySetInnerHTML:{__html:e.content}})]},e.id))})]})}export{nt as default};
